<!DOCTYPE html>
<html lang="zh-Hant" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿ƒç†æ¸¬é©—ï¼šè§£é–ä½ çš„ Galaxy åŸå‹äººæ ¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f0f4f8; /* A slightly cooler, more modern light gray */
        }

        /* --- New Background --- */
        .galaxy-background {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(ellipse at top, #d4e0ff, transparent),
                        radial-gradient(ellipse at bottom, #e1d4ff, transparent);
            opacity: 0.4;
            z-index: -1;
            overflow: hidden;
        }

        /* --- Animations --- */
        .fade-in-up {
            animation: fadeInUp 0.8s ease-out forwards;
            opacity: 0;
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.6s ease-in forwards;
            opacity: 0;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* --- Button Styles --- */
        .option-btn {
            transition: all 0.25s ease-in-out;
            border: 2px solid transparent;
            background-color: #ffffff;
            box-shadow: 0 4px 15px -5px rgba(0, 0, 0, 0.08);
        }
        .option-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px -5px rgba(79, 70, 229, 0.15);
            border-color: #6366f1; /* Indigo */
        }
        
        .primary-btn {
            background: linear-gradient(45deg, #4f46e5, #818cf8);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(79, 70, 229, 0.2);
        }
        .primary-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);
        }

        /* --- Result Card Gradients --- */
        .result-bg-A { background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%); }
        .result-bg-B { background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%); }
        .result-bg-C { background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%); }
        .result-bg-D { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); }

        /* --- Share Notification Toast --- */
        #share-toast {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
            transform: translateY(100%);
            opacity: 0;
        }
        #share-toast.show {
            transform: translateY(0);
            opacity: 1;
        }

    </style>
</head>
<body class="relative">
    <div class="galaxy-background"></div>

    <div class="flex items-center justify-center min-h-screen p-4">
        <div id="quiz-app" class="w-full max-w-xl mx-auto">

            <!-- Start Screen (Beautified) -->
            <div id="start-screen" class="text-center p-8 bg-white/70 backdrop-blur-xl rounded-3xl shadow-2xl shadow-indigo-100 fade-in-up">
                <div class="flex justify-center items-center mb-6">
                    <!-- A more abstract and fitting SVG graphic -->
                    <svg class="w-24 h-24" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#a78bfa;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#4f46e5;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <path fill="url(#grad1)" d="M50,5 C74.85,5 95,25.15 95,50 C95,74.85 74.85,95 50,95 C25.15,95 5,74.85 5,50 C5,25.15 25.15,5 50,5 Z M50,15 C30.67,15 15,30.67 15,50 C15,69.33 30.67,85 50,85 C69.33,85 85,69.33 85,50 C85,30.67 69.33,15 50,15 Z" />
                        <circle cx="50" cy="50" r="12" fill="#ffffff"/>
                        <circle cx="50" cy="50" r="5" fill="url(#grad1)"/>
                    </svg>
                </div>
                <h1 class="text-3xl md:text-4xl font-black text-slate-900">è§£é–ä½ çš„ <span class="text-indigo-600">Galaxy</span> åŸå‹äººæ ¼</h1>
                <p class="mt-4 text-slate-600 max-w-md mx-auto">ä½ çš„é¢¨æ ¼ã€ç¿’æ…£èˆ‡æ¸´æœ›ï¼Œéƒ½æŒ‡å‘ä½ çš„å‘½å®šæ‰‹æ©Ÿã€‚ç«‹å³é–‹å§‹ï¼Œç™¼ç¾èˆ‡ä½ éˆé­‚å…±é³´çš„ Galaxy å¤¥ä¼´ã€‚</p>
                <button onclick="startQuiz()" class="w-full mt-8 primary-btn text-white font-bold py-4 px-8 rounded-full text-lg">
                    ç«‹å³é–‹å§‹æ¸¬é©—
                </button>
            </div>

            <!-- Quiz Screen -->
            <div id="quiz-screen" style="display: none;">
                <div class="bg-white rounded-3xl shadow-2xl shadow-indigo-100 p-6 md:p-8 min-h-[550px] flex flex-col">
                    <div class="flex-shrink-0">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-bold text-indigo-600">Question <span id="question-number">1</span>/5</h2>
                            <div class="w-full bg-gray-200 rounded-full h-3 ml-4">
                                <div id="progress-bar" class="bg-indigo-500 h-3 rounded-full transition-all duration-500" style="width: 20%"></div>
                            </div>
                        </div>
                        <p id="question-text" class="text-lg md:text-xl font-bold text-slate-800 mb-8 min-h-[60px]"></p>
                    </div>
                    <div id="options-container" class="space-y-4 flex-grow flex flex-col justify-center">
                        <!-- Options will be dynamically inserted here -->
                    </div>
                </div>
            </div>
            
            <!-- Tie-breaker Screen -->
            <div id="tiebreaker-screen" style="display: none;">
                <div class="bg-white rounded-3xl shadow-2xl shadow-indigo-100 p-6 md:p-8 text-center min-h-[550px] flex flex-col justify-center items-center">
                    <h2 class="text-2xl font-bold text-slate-800">æœ€å¾Œä¸€æ­¥ï¼</h2>
                    <p class="mt-3 text-slate-600 max-w-sm">ä½ çš„å…§å¿ƒä½è‘—å¤šç¨®éˆé­‚ï¼åœ¨ä»¥ä¸‹ç‰¹è³ªä¸­ï¼Œä½ è¦ºå¾—æ­¤åˆ»çš„è‡ªå·±æ›´åå‘å“ªä¸€å€‹ï¼Ÿ</p>
                    <div id="tiebreaker-options" class="mt-8 space-y-4 w-full">
                        <!-- Tie-breaker options will be dynamically inserted here -->
                    </div>
                </div>
            </div>

            <!-- Result Screen (Beautified) -->
            <div id="result-screen" style="display: none;">
                <div id="result-card-content" class="rounded-3xl shadow-2xl shadow-indigo-200 overflow-hidden">
                    <div class="p-8 text-center">
                        <p class="font-semibold text-gray-700">ä½ çš„ Galaxy åŸå‹äººæ ¼æ˜¯...</p>
                        <h2 id="result-prototype" class="text-4xl font-black mt-1 text-slate-800"></h2>
                        <p id="result-title" class="text-xl font-bold mt-2 text-indigo-700"></p>
                    </div>
                    <div class="px-8 flex justify-center">
                        <img id="result-image" src="" alt="æ‰‹æ©Ÿåœ–ç‰‡" class="w-auto h-60 md:h-64 object-contain drop-shadow-2xl -mb-8">
                    </div>
                    <div class="bg-white/50 backdrop-blur-lg p-8 pt-12">
                        <p id="result-description" class="text-base text-gray-800 leading-relaxed text-center"></p>
                         <div class="mt-8 bg-white/80 border border-gray-200 rounded-2xl p-5 text-center">
                            <h3 class="text-lg font-bold text-center text-indigo-800">ğŸ å·²è§£é–ï¼šå°ˆå±¬ç·šä¸‹å¥½ç¦® ğŸ</h3>
                            <p class="mt-2 font-semibold">æ†‘æ­¤çµæœç•«é¢ï¼Œè¦ªè‡¨ã€å¾®é¢¨å—å±±ä¸‰æ˜Ÿæ——è‰¦é«”é©—é¤¨ã€‘ï¼Œå³å¯å…Œæ›ï¼š</p>
                            <p class="mt-2 text-2xl font-bold text-indigo-600">7-ELEVEN ç¾èƒèŒ¶ä¸€æ¯</p>
                            <p class="text-xs text-slate-500 mt-1">(æ¯æ—¥é™é‡ï¼Œé€å®Œç‚ºæ­¢ï¼Œæ´»å‹•è©³æƒ…ä»¥ç¾å ´å…¬å‘Šç‚ºæº–)</p>
                        </div>
                    </div>
                </div>
                <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <button onclick="restartQuiz()" class="w-full bg-white text-indigo-600 font-bold py-3 px-6 rounded-full hover:bg-slate-200 transition-colors duration-300 shadow-lg">
                        å†æ¸¬ä¸€æ¬¡
                    </button>
                     <button id="share-btn" class="w-full primary-btn text-white font-bold py-3 px-6 rounded-full flex items-center justify-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                          <path d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z" />
                        </svg>
                        <span>åˆ†äº«çµæœ</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Share Toast Notification -->
    <div id="share-toast" class="fixed bottom-5 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-sm font-semibold py-2 px-4 rounded-full shadow-lg">
        å·²è¤‡è£½åˆ†äº«å…§å®¹åˆ°å‰ªè²¼ç°¿ï¼
    </div>


    <script>
        const quizData = [
            {
                question: "æœŸå¾…å·²ä¹…çš„é€±æœ«åˆå¾Œï¼Œä½ æœƒå‚¾å‘å¦‚ä½•åº¦éï¼Ÿ",
                options: [
                    { text: "åœ¨å’–å•¡å»³é«˜æ•ˆè™•ç†å·¥ä½œã€è¦åŠƒè¡Œç¨‹ï¼Œäº«å—æ•ˆç‡å¸¶ä¾†çš„æ»¿è¶³æ„Ÿã€‚", type: 'A' },
                    { text: "èˆ‡å¥½å‹ç›¸ç´„æœ€æ½®çš„æ‰“å¡é»ï¼Œç²¾å¿ƒæ‰“æ‰®ï¼Œæ‹ä¸‹é¢¨æ ¼ç…§ç‰‡å’ŒReelsã€‚", type: 'B' },
                    { text: "å‰å¾€éƒŠå¤–ï¼Œå°ˆæ³¨æ•æ‰é æ–¹çš„é£›é³¥æˆ–å»ºç¯‰ç´°ç¯€ï¼Œè¿½æ±‚ä¸€å¼µå®Œç¾ä½œå“ã€‚", type: 'C' },
                    { text: "æ‚ é–’æ¢ç´¢åŸå¸‚å°å··ï¼Œç”¨AIå°‹æ‰¾ç¾é£Ÿï¼Œéš¨æ‰‹è¨˜éŒ„ç”Ÿæ´»ä¸­çš„ç¾å¥½ã€‚", type: 'D' }
                ]
            },
            {
                question: "ç•¶ä½ æ¥åˆ°ä¸€å€‹è¤‡é›œçš„å¤šéšæ®µå°ˆæ¡ˆæ™‚ï¼Œä½ çš„ç¬¬ä¸€åæ‡‰æ˜¯ï¼Ÿ",
                options: [
                    { text: "å°‡æ‰€æœ‰ä»»å‹™æ”¤é–‹ï¼Œä¸€å¿ƒå¤šç”¨ï¼ŒåŒæ­¥æ¨é€²ï¼Œå±•ç¾å¼·å¤§çµ±ç±Œèƒ½åŠ›ã€‚", type: 'A' },
                    { text: "ç«‹åˆ»æ‰¾å¤¥ä¼´è…¦åŠ›æ¿€ç›ªï¼Œç”¨æœ€æœ‰å‰µæ„çš„æ–¹å¼æºé€šï¼Œè®“éç¨‹è®Šæœ‰è¶£ã€‚", type: 'B' },
                    { text: "åˆ¶å®šæ¥µå…¶è©³ç›¡çš„è¨ˆç•«ï¼Œç”¨ç­†è¨˜ä¸‹æ¯å€‹ç´°ç¯€ï¼Œç¢ºä¿ä¸€åˆ‡ç²¾æº–ç„¡èª¤ã€‚", type: 'C' },
                    { text: "å…ˆç”¨æ™ºæ…§å·¥å…·åˆ†ææ ¸å¿ƒå•é¡Œï¼Œæ‰¾åˆ°æœ€é«˜æ•ˆçš„è§£æ±ºè·¯å¾‘ã€‚", type: 'D' }
                ]
            },
            {
                question: "ä½ æœ€å¸¸åœ¨ç¤¾ç¾¤å¹³å° (å¦‚ Threads) ä¸Šåˆ†äº«å“ªç¨®å…§å®¹ï¼Ÿ",
                options: [
                    { text: "ç”¢æ¥­è¶¨å‹¢åˆ†æã€æ·±åº¦æ–‡ç« æ‘˜è¦ï¼Œæˆ–å±•ç¾å°ˆæ¥­è¦‹è§£çš„å¤šè¢å¹•å·¥ä½œç•«é¢ã€‚", type: 'A' },
                    { text: "ç²¾å¿ƒèª¿è‰²éçš„ç”Ÿæ´»ç¾ç…§ã€å……æ»¿æ´»åŠ›çš„çŸ­å½±ç‰‡ï¼Œæˆ–æ˜¯ä½ çš„OOTDã€‚", type: 'B' },
                    { text: "é«˜è§£æåº¦çš„æ”å½±ä½œå“ï¼Œä¸è«–æ˜¯æ¼”å”±æœƒç‰¹å¯«ï¼Œæˆ–æ˜¯ç’€ç’¨çš„åŸå¸‚å¤œæ™¯ã€‚", type: 'C' },
                    { text: "å„ç¨®ç”Ÿæ´»ä¸­çš„å¯¦ç”¨è³‡è¨Šã€AIç”Ÿæˆçš„æœ‰è¶£åœ–ç‰‡ï¼Œæˆ–èˆ‡æœ‹å‹çš„æ—¥å¸¸äº’å‹•ã€‚", type: 'D' }
                ]
            },
            {
                question: "é¸è³¼ä¸€ä»¶æ–°çš„ç§‘æŠ€ç”¢å“æ™‚ï¼Œä½ æœ€çœ‹é‡çš„æ˜¯ï¼Ÿ",
                options: [
                    { text: "èƒ½å¦é¡›è¦†æˆ‘çš„å·¥ä½œæµç¨‹ï¼Œæä¾›å‰æ‰€æœªæœ‰çš„ç”Ÿç”¢åŠ›èˆ‡å¤§è¢å¹•é«”é©—ã€‚", type: 'A' },
                    { text: "è¨­è¨ˆæ˜¯å¦ç¨ç‰¹ã€æ™‚å°šï¼Œèƒ½å¦æˆç‚ºæˆ‘å€‹äººé¢¨æ ¼çš„å»¶ä¼¸ã€‚", type: 'B' },
                    { text: "æ˜¯å¦æ“æœ‰é ‚ç´šçš„å°ˆæ¥­æ€§èƒ½ï¼Œç‰¹åˆ¥æ˜¯åœ¨ç›¸æ©Ÿèˆ‡ç²¾æº–æ“æ§æ–¹é¢ã€‚", type: 'C' },
                    { text: "æ•´é«”æ˜¯å¦å‡è¡¡ã€æ™ºæ…§ï¼Œèƒ½ç„¡ç¸«èå…¥æˆ‘çš„ç”Ÿæ´»ä¸¦æä¾›è°æ˜çš„è§£æ±ºæ–¹æ¡ˆã€‚", type: 'D' }
                ]
            },
            {
                question: "å¦‚æœèƒ½ç«‹åˆ»æ”¾ä¸€å ´å‡ï¼Œä½ çš„ç†æƒ³æ—…ç¨‹æ˜¯ï¼Ÿ",
                options: [
                    { text: "å•†å‹™æ—…è¡ŒçµåˆåŸå¸‚æ¢ç´¢ï¼Œç™½å¤©é«˜æ•ˆé–‹æœƒï¼Œæ™šä¸Šäº«å—ç•°åœ‹é¢¨æƒ…ã€‚", type: 'A' },
                    { text: "å‰å¾€æ™‚å°šä¹‹éƒ½ï¼ˆå¦‚å·´é»ã€é¦–çˆ¾ï¼‰ï¼Œé€›è¡—ã€çœ‹å±•ã€è·‘éæ‰€æœ‰æœ€æ½®æ™¯é»ã€‚", type: 'B' },
                    { text: "æ·±å…¥å¤§è‡ªç„¶ï¼ˆå¦‚åœ‹å®¶å…¬åœ’ï¼‰ï¼Œç”¨é¡é ­è¨˜éŒ„ä¸‹å£¯éº—çš„é¢¨æ™¯èˆ‡ç”Ÿæ…‹ã€‚", type: 'C' },
                    { text: "ä¸€è¶Ÿè¦åŠƒå®Œå–„çš„è‡ªç”±è¡Œï¼Œç”¨æ™ºæ…§åŠ©ç†å®‰æ’å¥½äº¤é€šè¡Œç¨‹ï¼Œè¼•é¬†äº«å—ã€‚", type: 'D' }
                ]
            }
        ];

        const results = {
            'A': { title: "Galaxy Z Fold7", prototype: "é‹ç±Œå¸·å¹„çš„ã€Œé–‹å‰µè€…ã€", description: "ä½ æ“æœ‰å¼·å¤§çš„é‡å¿ƒèˆ‡å®è§€çš„è¦–é‡ï¼Œå¤©ç”Ÿå°±æ˜¯ä¸€ä½å¤šå·¥è™•ç†å¤§å¸«ã€‚ä½ ä¸æ»¿è¶³æ–¼å–®ä¸€è¦–çª—ï¼Œæ¸´æœ›å±•é–‹æ›´å¤§çš„ä¸–ç•Œä¾†å¯¦ç¾ä½ çš„è—åœ–ã€‚Galaxy Z Fold7 çš„æ²‰æµ¸å¼å¤§è¢å¹•èˆ‡æ¥µè‡´ç”Ÿç”¢åŠ›ï¼Œæ­£æ˜¯ç‚ºä½ é€™æ¨£èƒ½ã€Œä¸€æ‰‹æŒæ¡å…¨å±€ã€çš„é–‹å‰µè€…æ‰€æº–å‚™ã€‚", image: "https://placehold.co/600x400/a8b2ff/1f2937?text=Galaxy+Z+Fold7&font=noto-sans-tc", bgClass: "result-bg-A" },
            'B': { title: "Galaxy Z Flip7", prototype: "å¼•é ˜æ½®æµçš„ã€Œé¢¨æ ¼å®¶ã€", description: "ä½ å……æ»¿æ´»åŠ›ã€ç†±æ„›ç¤¾äº¤ï¼Œæ˜¯æœ‹å‹åœˆä¸­è‡ªå¸¶å…‰èŠ’çš„å­˜åœ¨ã€‚ä½ å°ç¾æ„Ÿæœ‰è‘—æ•éŠ³çš„ç›´è¦ºï¼Œç”Ÿæ´»ä¸­çš„æ¯ä¸€å€‹ç¬é–“éƒ½å€¼å¾—è¢«ç²¾å¿ƒè¨˜éŒ„èˆ‡åˆ†äº«ã€‚Galaxy Z Flip7 çš„ç²¾å·§è¨­è¨ˆã€å¤šè§’åº¦æ‹æ”çš„è‡ªç”±ï¼Œæ­£æ˜¯ç‚ºä½ é€™æ¨£èƒ½ã€Œå®šç¾©è‡ªæˆ‘é¢¨æ ¼ã€çš„é¢¨æ ¼å®¶æ‰€æ‰“é€ ã€‚", image: "https://placehold.co/600x400/fbc2eb/1f2937?text=Galaxy+Z+Flip7&font=noto-sans-tc", bgClass: "result-bg-B" },
            'C': { title: "Galaxy S25 Ultra", prototype: "è¿½æ±‚æ¥µè‡´çš„ã€Œå‰µé€ å®¶ã€", description: "ä½ å°ç´°ç¯€æœ‰è‘—è¿‘ä¹ååŸ·çš„è¿½æ±‚ï¼Œç„¡è«–æ˜¯å·¥ä½œé‚„æ˜¯å‰µä½œï¼Œéƒ½ä»¥ã€Œå®Œç¾ã€ç‚ºæœ€é«˜æ¨™æº–ã€‚ä½ æ¸´æœ›ç”¨æœ€å¼·å¤§çš„å·¥å…·ï¼Œå°‡è…¦ä¸­çš„ç•«é¢ç²¾æº–åœ°åŒ–ç‚ºç¾å¯¦ã€‚Galaxy S25 Ultra çš„é ‚ç´šç›¸æ©Ÿç³»çµ±èˆ‡ç²¾æº–æ“æ§ï¼Œæ­£æ˜¯ç‚ºä½ é€™æ¨£ã€Œå°ˆæ³¨æ–¼ç´°ç¯€ã€çš„å‰µé€ å®¶è€Œç”Ÿã€‚", image: "https://placehold.co/600x400/4b5563/ffffff?text=Galaxy+S25+Ultra&font=noto-sans-tc", bgClass: "result-bg-C" },
            'D': { title: "Galaxy S25", prototype: "è°æ˜ç”Ÿæ´»çš„ã€Œå…¨èƒ½è€…ã€", description: "ä½ å‹™å¯¦ã€è°æ˜ä¸”æ‡‚å¾—å¹³è¡¡ã€‚ä½ è¿½æ±‚çš„æ˜¯æœ€æ™ºæ…§ã€æœ€é †æš¢ã€æœ€æ°åˆ°å¥½è™•çš„é ‚ç´šé«”é©—ã€‚ä½ ç¸½èƒ½æ‰¾åˆ°æœ€é«˜æ•ˆçš„æ–¹æ³•è§£æ±ºå•é¡Œã€‚Galaxy S25 çš„å…¨æ–¹ä½AIåŠŸèƒ½èˆ‡å‡è¡¡æ€§èƒ½ï¼Œæ­£æ˜¯ç‚ºä½ é€™æ¨£ã€Œæ‡‚å¾—è°æ˜é¸æ“‡ã€çš„å…¨èƒ½è€…æ‰€è¨­è¨ˆã€‚", image: "https://placehold.co/600x400/3b82f6/ffffff?text=Galaxy+S25&font=noto-sans-tc", bgClass: "result-bg-D" }
        };

        let currentQuestionIndex = 0;
        let userAnswers = [];

        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        const tiebreakerScreen = document.getElementById('tiebreaker-screen');
        
        const questionNumberEl = document.getElementById('question-number');
        const questionTextEl = document.getElementById('question-text');
        const optionsContainerEl = document.getElementById('options-container');
        const progressBarEl = document.getElementById('progress-bar');
        const shareBtn = document.getElementById('share-btn');
        const shareToast = document.getElementById('share-toast');
        
        function triggerAnimation(element) {
            if (!element) return;
            element.classList.remove('fade-in-up');
            void element.offsetWidth; 
            element.classList.add('fade-in-up');
        }

        function startQuiz() {
            currentQuestionIndex = 0;
            userAnswers = [];
            startScreen.style.display = 'none';
            resultScreen.style.display = 'none';
            tiebreakerScreen.style.display = 'none';
            quizScreen.style.display = 'block';
            triggerAnimation(quizScreen.firstElementChild);
            showQuestion();
        }

        function showQuestion() {
            const questionData = quizData[currentQuestionIndex];
            questionNumberEl.textContent = currentQuestionIndex + 1;
            questionTextEl.textContent = questionData.question;
            optionsContainerEl.innerHTML = '';

            questionData.options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'w-full text-left p-4 rounded-xl option-btn hover:bg-indigo-50';
                button.innerHTML = `<span class="font-bold text-indigo-600 mr-3">${option.type}</span> ${option.text}`;
                button.onclick = () => selectOption(option.type);
                optionsContainerEl.appendChild(button);
            });
            
            progressBarEl.style.width = `${((currentQuestionIndex + 1) / quizData.length) * 100}%`;
        }

        function selectOption(type) {
            // Disable buttons to prevent double-clicking
            const buttons = optionsContainerEl.querySelectorAll('button');
            buttons.forEach(btn => btn.disabled = true);

            userAnswers.push(type);
            currentQuestionIndex++;
            
            setTimeout(() => {
                if (currentQuestionIndex < quizData.length) {
                    const quizCard = quizScreen.firstElementChild;
                    quizCard.classList.remove('fade-in-up');
                    void quizCard.offsetWidth;
                    quizCard.classList.add('fade-in-up');
                    showQuestion();
                } else {
                    calculateResult();
                }
            }, 300); // A short delay for visual feedback
        }

        function calculateResult() {
            const counts = userAnswers.reduce((acc, answer) => {
                acc[answer] = (acc[answer] || 0) + 1;
                return acc;
            }, {});

            const sortedCounts = Object.entries(counts).sort((a, b) => b[1] - a[1]);
            
            if (sortedCounts.length > 1 && sortedCounts[0][1] === sortedCounts[1][1]) {
                // Filter to only show the tied results
                const tiedTypes = sortedCounts.filter(entry => entry[1] === sortedCounts[0][1]);
                showTiebreaker(tiedTypes);
            } else {
                const finalResultType = sortedCounts[0][0];
                showResult(finalResultType);
            }
        }
        
        function showTiebreaker(tiedResults) {
            quizScreen.style.display = 'none';
            tiebreakerScreen.style.display = 'block';
            triggerAnimation(tiebreakerScreen.firstElementChild);
            const tiebreakerOptionsEl = document.getElementById('tiebreaker-options');
            tiebreakerOptionsEl.innerHTML = '';
            
            tiedResults.forEach(result => {
                const type = result[0];
                if(results[type]) {
                    const button = document.createElement('button');
                    button.className = 'w-full text-center p-4 bg-indigo-600 text-white rounded-full option-btn text-lg font-bold hover:bg-indigo-700 primary-btn';
                    button.textContent = `æˆ‘æ›´åƒæ˜¯ï¼š${results[type].prototype}`;
                    button.onclick = () => showResult(type);
                    tiebreakerOptionsEl.appendChild(button);
                }
            });
        }

        function showResult(type) {
            const resultData = results[type];
            document.getElementById('result-title').textContent = resultData.title;
            document.getElementById('result-prototype').textContent = resultData.prototype;
            document.getElementById('result-description').textContent = resultData.description;
            document.getElementById('result-image').src = resultData.image;
            document.getElementById('result-image').alt = resultData.title;
            
            const resultCardContent = document.getElementById('result-card-content');
            // Reset classes before adding the new one
            resultCardContent.className = 'rounded-3xl shadow-2xl shadow-indigo-200 overflow-hidden'; 
            resultCardContent.classList.add(resultData.bgClass);

            // Set up the share button
            shareBtn.onclick = () => shareResult(type);

            quizScreen.style.display = 'none';
            tiebreakerScreen.style.display = 'none';
            resultScreen.style.display = 'block';
            triggerAnimation(resultScreen);
        }

        function restartQuiz() {
            resultScreen.style.display = 'none';
            startScreen.style.display = 'block';
            triggerAnimation(startScreen);
        }

        // --- FIX: Robust Share Functionality ---
        async function shareResult(type) {
            const resultData = results[type];
            const shareText = `æˆ‘æ¸¬å‡ºä¾†çš„ Galaxy åŸå‹äººæ ¼æ˜¯ã€Œ${resultData.prototype}ã€ï¼å¿«ä¾†æ¸¬æ¸¬çœ‹ä½ æ˜¯å“ªä¸€ç¨®ã€‚`;
            const shareUrl = window.location.href;
            const fullTextToCopy = `${shareText}\n${shareUrl}`;

            const shareData = {
                title: 'è§£é–ä½ çš„ Galaxy åŸå‹äººæ ¼',
                text: shareText,
                url: shareUrl,
            };

            // Fallback function using document.execCommand('copy')
            const fallbackCopy = () => {
                const textArea = document.createElement("textarea");
                textArea.value = fullTextToCopy;
                
                // Avoid scrolling to bottom
                textArea.style.position = 'fixed';
                textArea.style.top = 0;
                textArea.style.left = 0;
                textArea.style.width = '1px';
                textArea.style.height = '1px';
                textArea.style.padding = 0;
                textArea.style.border = 'none';
                textArea.style.outline = 'none';
                textArea.style.boxShadow = 'none';
                textArea.style.background = 'transparent';

                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();

                try {
                    const successful = document.execCommand('copy');
                    if (successful) {
                        showToast('å·²è¤‡è£½åˆ†äº«å…§å®¹åˆ°å‰ªè²¼ç°¿ï¼');
                    } else {
                        showToast('è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•åˆ†äº«ï¼');
                    }
                } catch (err) {
                    console.error('Fallback copy failed', err);
                    showToast('è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•åˆ†äº«ï¼');
                }

                document.body.removeChild(textArea);
            };

            // Use Web Share API if available.
            if (navigator.share) {
                try {
                    await navigator.share(shareData);
                    console.log('Result shared successfully');
                } catch (err) {
                    // If navigator.share fails (e.g., permission denied in iframe), use fallback.
                    console.error('Share failed, falling back to clipboard:', err);
                    fallbackCopy();
                }
            } else {
                // If navigator.share is not available, use fallback.
                fallbackCopy();
            }
        }

        function showToast(message) {
            shareToast.textContent = message;
            shareToast.classList.add('show');
            setTimeout(() => {
                shareToast.classList.remove('show');
            }, 3000); // Hide after 3 seconds
        }

    </script>
</body>
</html>
